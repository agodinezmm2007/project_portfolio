<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>3&nbsp; Data Collection – Portfolio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./03-literature-review.html" rel="next">
<link href="./01-proposal.html" rel="prev">
<link href="./pic/cover.png" rel="icon" type="image/png">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>


</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./02-data-collection.html"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Collection</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Portfolio</a> 
        <div class="sidebar-tools-main">
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Introduction</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./01-proposal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Literature Analytics and Methodological Gap Analysis in Geospatial Epidemiology</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./02-data-collection.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Collection</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./03-literature-review.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Literature Review</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./04-prelim-analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Preliminary Analysis</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./05-aim3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Proposed Deep Learning Framework for UOG Site Monitoring (Aim 3)</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./06-technical-report.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Technical Report</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./summary.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Summary</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./references.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">References</span></span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./update.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Project Update</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">Appendices</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-a-etl-rag.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">A</span>&nbsp; <span class="chapter-title">appendix-a-etl-rag.html</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-b-lca-rf.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">B</span>&nbsp; <span class="chapter-title">Preliminary LCA Cover crop Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-c-hardware.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">C</span>&nbsp; <span class="chapter-title">Appendix C: Computational Hardware</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-d-neo4j-queries.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">D</span>&nbsp; <span class="chapter-title">Knowledge Graph Queries and Supporting Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./appendix-e-db-queries.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">E</span>&nbsp; <span class="chapter-title">Database Queries</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#purpose-and-relevance" id="toc-purpose-and-relevance" class="nav-link active" data-scroll-target="#purpose-and-relevance"><span class="header-section-number">4</span> Purpose and Relevance</a></li>
  <li><a href="#overview-of-available-datasets" id="toc-overview-of-available-datasets" class="nav-link" data-scroll-target="#overview-of-available-datasets"><span class="header-section-number">5</span> Overview of Available Datasets</a>
  <ul>
  <li><a href="#cdc-500-cities-project-20162019" id="toc-cdc-500-cities-project-20162019" class="nav-link" data-scroll-target="#cdc-500-cities-project-20162019"><span class="header-section-number">5.1</span> CDC 500 Cities Project (2016–2019)</a></li>
  <li><a href="#nationwide-blood-donor-seroprevalence-survey-20222023" id="toc-nationwide-blood-donor-seroprevalence-survey-20222023" class="nav-link" data-scroll-target="#nationwide-blood-donor-seroprevalence-survey-20222023"><span class="header-section-number">5.2</span> Nationwide Blood Donor Seroprevalence Survey (2022–2023)</a></li>
  <li><a href="#pm2.5-and-ozone-concentrations" id="toc-pm2.5-and-ozone-concentrations" class="nav-link" data-scroll-target="#pm2.5-and-ozone-concentrations"><span class="header-section-number">5.3</span> PM<sub>2.5</sub> and Ozone Concentrations</a></li>
  <li><a href="#places-measures-expanded-from-500-cities" id="toc-places-measures-expanded-from-500-cities" class="nav-link" data-scroll-target="#places-measures-expanded-from-500-cities"><span class="header-section-number">5.4</span> PLACES Measures (Expanded from 500 Cities)</a></li>
  <li><a href="#statecounty-mortality-datasets" id="toc-statecounty-mortality-datasets" class="nav-link" data-scroll-target="#statecounty-mortality-datasets"><span class="header-section-number">5.5</span> State/County Mortality Datasets</a></li>
  <li><a href="#covid-19-case-surveillance-data" id="toc-covid-19-case-surveillance-data" class="nav-link" data-scroll-target="#covid-19-case-surveillance-data"><span class="header-section-number">5.6</span> COVID-19 Case Surveillance Data</a></li>
  <li><a href="#daily-census-tract-level-ozone-concentrations-2001-2015" id="toc-daily-census-tract-level-ozone-concentrations-2001-2015" class="nav-link" data-scroll-target="#daily-census-tract-level-ozone-concentrations-2001-2015"><span class="header-section-number">5.7</span> Daily Census Tract level Ozone Concentrations 2001-2015</a></li>
  <li><a href="#rates-and-trends-in-heart-disease-and-stroke-mortality-among-us-adults-stratified-by-age-group-race-and-ethnicity-and-sex-200-2009" id="toc-rates-and-trends-in-heart-disease-and-stroke-mortality-among-us-adults-stratified-by-age-group-race-and-ethnicity-and-sex-200-2009" class="nav-link" data-scroll-target="#rates-and-trends-in-heart-disease-and-stroke-mortality-among-us-adults-stratified-by-age-group-race-and-ethnicity-and-sex-200-2009"><span class="header-section-number">5.8</span> Rates and Trends in Heart Disease and Stroke Mortality Among US Adults Stratified by age group, race and ethnicity, and sex (200-2009)</a></li>
  </ul></li>
  <li><a href="#big-data-considerations" id="toc-big-data-considerations" class="nav-link" data-scroll-target="#big-data-considerations"><span class="header-section-number">6</span> Big Data Considerations</a></li>
  <li><a href="#integration-with-the-etl-rag-workflow-for-literature-analytics-on-ozone-levels-and-heart-disease" id="toc-integration-with-the-etl-rag-workflow-for-literature-analytics-on-ozone-levels-and-heart-disease" class="nav-link" data-scroll-target="#integration-with-the-etl-rag-workflow-for-literature-analytics-on-ozone-levels-and-heart-disease"><span class="header-section-number">7</span> Integration with the ETL + RAG Workflow for literature analytics on ozone levels and heart disease</a>
  <ul>
  <li><a href="#topic-modeling-research-gaps" id="toc-topic-modeling-research-gaps" class="nav-link" data-scroll-target="#topic-modeling-research-gaps"><span class="header-section-number">7.1</span> Topic Modeling &amp; Research Gaps</a></li>
  <li><a href="#etl-phase" id="toc-etl-phase" class="nav-link" data-scroll-target="#etl-phase"><span class="header-section-number">7.2</span> ETL Phase</a></li>
  <li><a href="#rag-phase-linking-literature-to-the-ozone-stroke-data" id="toc-rag-phase-linking-literature-to-the-ozone-stroke-data" class="nav-link" data-scroll-target="#rag-phase-linking-literature-to-the-ozone-stroke-data"><span class="header-section-number">7.3</span> RAG Phase: Linking Literature to the Ozone &amp; Stroke Data</a></li>
  <li><a href="#potential-for-publication" id="toc-potential-for-publication" class="nav-link" data-scroll-target="#potential-for-publication"><span class="header-section-number">7.4</span> Potential for Publication</a></li>
  <li><a href="#future-research-horizons-and-technical-scaling" id="toc-future-research-horizons-and-technical-scaling" class="nav-link" data-scroll-target="#future-research-horizons-and-technical-scaling"><span class="header-section-number">7.5</span> Future Research Horizons and Technical Scaling</a>
  <ul class="collapse">
  <li><a href="#technical-scaling-and-computational-frontiers" id="toc-technical-scaling-and-computational-frontiers" class="nav-link" data-scroll-target="#technical-scaling-and-computational-frontiers"><span class="header-section-number">7.5.1</span> Technical Scaling and Computational Frontiers</a></li>
  <li><a href="#future-research-directions" id="toc-future-research-directions" class="nav-link" data-scroll-target="#future-research-directions"><span class="header-section-number">7.5.2</span> Future Research Directions</a></li>
  </ul></li>
  <li><a href="#summary-of-assembled-data-assets" id="toc-summary-of-assembled-data-assets" class="nav-link" data-scroll-target="#summary-of-assembled-data-assets"><span class="header-section-number">7.6</span> Summary of Assembled Data Assets</a></li>
  </ul></li>
  <li><a href="#machine-learning-aproaches-for-the-analysis" id="toc-machine-learning-aproaches-for-the-analysis" class="nav-link" data-scroll-target="#machine-learning-aproaches-for-the-analysis"><span class="header-section-number">8</span> Machine Learning Aproaches for the Analysis</a></li>
  <li><a href="#foundational-data-processing-a-demonstration" id="toc-foundational-data-processing-a-demonstration" class="nav-link" data-scroll-target="#foundational-data-processing-a-demonstration"><span class="header-section-number">9</span> Foundational Data Processing: A Demonstration</a>
  <ul>
  <li><a href="#load-libraries-and-set-up-environment" id="toc-load-libraries-and-set-up-environment" class="nav-link" data-scroll-target="#load-libraries-and-set-up-environment"><span class="header-section-number">9.1</span> Load Libraries and Set Up Environment</a></li>
  <li><a href="#importing-the-data" id="toc-importing-the-data" class="nav-link" data-scroll-target="#importing-the-data"><span class="header-section-number">9.2</span> Importing the Data</a></li>
  <li><a href="#summaries-with-multi-threading" id="toc-summaries-with-multi-threading" class="nav-link" data-scroll-target="#summaries-with-multi-threading"><span class="header-section-number">9.3</span> Summaries with Multi-Threading</a></li>
  <li><a href="#merge-standardize-ozone-data" id="toc-merge-standardize-ozone-data" class="nav-link" data-scroll-target="#merge-standardize-ozone-data"><span class="header-section-number">9.4</span> Merge &amp; Standardize Ozone Data</a></li>
  <li><a href="#export-other-datasets-as-feather" id="toc-export-other-datasets-as-feather" class="nav-link" data-scroll-target="#export-other-datasets-as-feather"><span class="header-section-number">9.5</span> Export Other Datasets as Feather</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Data Collection</span></h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>In this section, I describe the key data sources that could be leveraged for this project. Initially, my ETL + RAG pipeline was designed to extract data from PDF academic papers. However, I also have access to large, geocoded CDC datasets that might be integrated into the overall analysis (particularly if I choose to focus on epidemiological or spatial questions). after a brief exploratory analysis of the datasets, their should be enough context to feed queries into the ETL + RAG system to identify research gaps and use this system to fill them</p>
<hr>
<section id="purpose-and-relevance" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Purpose and Relevance</h1>
<p>While the initial project was an <strong>AI-powered ETL &amp; RAG pipeline</strong> for literature analytics, the same pipeline could be adapted to identify research gaps and create unique insights into <strong>public health</strong> or <strong>geospatial</strong> phenomena.</p>
<p>I am considering including these CDC datasets for either:</p>
<ul>
<li><p><strong>Enriching</strong> the final analysis with real-world data (e.g., linking extracted references about “cardiovascular health” to real incidence or mortality data from the CDC).</p></li>
<li><p><strong>Demonstrating</strong> how big data ingestion (on the order of hundreds of millions of rows) can be integrated into the workflow, giving the pipeline a broader scope of queries (e.g., “What are the trends in stroke mortality by county, and which papers discuss new stroke interventions?” “what machine learning aproaches have yet to be used for spatialtemporal analysis between ozone exposure and heart disease?”).</p></li>
</ul>
<hr>
</section>
<section id="overview-of-available-datasets" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Overview of Available Datasets</h1>
<section id="cdc-500-cities-project-20162019" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="cdc-500-cities-project-20162019"><span class="header-section-number">5.1</span> CDC 500 Cities Project (2016–2019)</h2>
<ul>
<li><strong>Focus</strong>: Provided tract-level estimates for chronic disease risk factors and outcomes (e.g., smoking prevalence, obesity, diabetes) within the largest 500 US cities.</li>
<li><strong>Format &amp; Size</strong>: Over 28,000 census tracts across ~500 cities. Population coverage of over 100 million.</li>
<li><strong>Potential Use Case</strong>: Could cross-reference academic articles discussing urban health interventions with actual city-level data on risk factors (via the RAG pipeline’s references).</li>
</ul>
</section>
<section id="nationwide-blood-donor-seroprevalence-survey-20222023" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="nationwide-blood-donor-seroprevalence-survey-20222023"><span class="header-section-number">5.2</span> Nationwide Blood Donor Seroprevalence Survey (2022–2023)</h2>
<ul>
<li><strong>Focus</strong>: SARS-CoV-2 (COVID-19) antibody testing among blood donors, capturing infection- and vaccine-induced seroprevalence.</li>
<li><strong>Data</strong>: De-identified blood samples tested for anti-spike (vaccinated or previously infected) vs.&nbsp;anti-nucleocapsid (infection-only) antibodies.</li>
<li><strong>Potential Use Case</strong>: Combine with academic literature on vaccination strategies or compare the pipeline’s reference retrieval on “COVID-19 seroprevalence” to real, up-to-date trends.</li>
</ul>
</section>
<section id="pm2.5-and-ozone-concentrations" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="pm2.5-and-ozone-concentrations"><span class="header-section-number">5.3</span> PM<sub>2.5</sub> and Ozone Concentrations</h2>
<ul>
<li><strong>Daily County-Level PM<sub>2.5</sub> (2001–2019)</strong></li>
<li><strong>Daily Census-Tract-Level Ozone</strong> (2001–2005, 2006–2010, 2011–2014)</li>
<li><strong>Size</strong>: Up to 11 GB or more, with 100M+ rows in certain files.</li>
<li><strong>Spatial Coverage</strong>: Each row has FIPS codes and lat/long coordinates for geospatial analysis.</li>
<li><strong>Potential Use Case</strong>: If the project investigates air quality or environment-related health outcomes and references environment-based interventions (e.g., “cover crops to reduce air pollutants or improve soil health”), the pipeline could unify the references about environmental intervention strategies with real local air quality data.</li>
</ul>
</section>
<section id="places-measures-expanded-from-500-cities" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="places-measures-expanded-from-500-cities"><span class="header-section-number">5.4</span> PLACES Measures (Expanded from 500 Cities)</h2>
<ul>
<li><strong>Focus</strong>: Health outcomes, preventive measures, risk behaviors, disabilities, and more. This extends the 500 Cities concept to every county, place, and census tract in the United States.</li>
<li><strong>Format</strong>: Data measures in multiple categories: (1) Health Outcomes, (2) Prevention,
<ol start="3" type="1">
<li>Risk Behaviors, (4) Disabilities, (5) Social Determinants, etc.</li>
</ol></li>
<li><strong>Potential Use Case</strong>: Tie in references discussing health disparities or social determinants of health to actual local or census-tract-level data on risk factors.</li>
</ul>
</section>
<section id="statecounty-mortality-datasets" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="statecounty-mortality-datasets"><span class="header-section-number">5.5</span> State/County Mortality Datasets</h2>
<ul>
<li><strong>Coronary Heart Disease &amp; Stroke</strong></li>
<li><strong>HeartDisease_Stroke_Mortality_Adults</strong> (≥35 years)</li>
<li><strong>Stroke_Mortality_State_County</strong></li>
<li><strong>Focus</strong>: Mortality rates, changes over time, demographic breakdowns (race, age, sex), all georeferenced by county or sometimes census tract.</li>
<li><strong>Potential Use Case</strong>: Link references to <strong>epidemiological</strong> insights about heart disease or stroke with the real aggregated data for analysis or cross-validation.</li>
</ul>
</section>
<section id="covid-19-case-surveillance-data" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="covid-19-case-surveillance-data"><span class="header-section-number">5.6</span> COVID-19 Case Surveillance Data</h2>
<ul>
<li><strong>Size</strong>: ~14 GB, 106+ million rows.</li>
<li><strong>Contents</strong>: De-identified line-level data for COVID-19 cases (date of symptom onset, demographic info, comorbidities, etc.).</li>
<li><strong>Potential Use Case</strong>: Potential to pair large-scale case counts or demographic breakdowns with references describing COVID-19 interventions or analyses.</li>
</ul>
</section>
<section id="daily-census-tract-level-ozone-concentrations-2001-2015" class="level2" data-number="5.7">
<h2 data-number="5.7" class="anchored" data-anchor-id="daily-census-tract-level-ozone-concentrations-2001-2015"><span class="header-section-number">5.7</span> Daily Census Tract level Ozone Concentrations 2001-2015</h2>
<ul>
<li><strong>size</strong>: 27.62 GB, 412 million rows</li>
<li><strong>colnames</strong>: “year” “date” “statefips” “countyfips” “ctfips” “latitude” “longitude” “DS_O3_pred” “DS_O3_stdd”</li>
<li><strong>Contents</strong>: census tract level daily Ozone metrics</li>
<li><strong>Potential use Case</strong>: <strong>Time-Series or Panel Regression</strong>
<ul>
<li>longitudinal or panel model that includes each county across multiple years.</li>
<li>run a machine-learning approach (like a random forest regression or XGBoost) to see if ozone is predictive of heart disease/stroke mortality</li>
<li>incorporate geospatial features (e.g., a “neighbors” matrix or geospatial embedding) in more advanced models</li>
</ul>
<strong>Spatiotemporal Clustering or Hotspot Detection</strong>
<ul>
<li>identify “hotspots” of high ozone vs.&nbsp;“hotspots” of high stroke mortality over time.</li>
<li>Compare them visually and quantitatively</li>
<li>do clusters of elevated ozone correlate with clusters of elevated stroke mortality?</li>
</ul>
<strong>Lag or Distributed‐Lag Models</strong>
<ul>
<li>Often in environmental epidemiology, the effect of ozone on cardiovascular outcomes can have a short-term or delayed effect (like a lag of a few days or weeks)</li>
<li>might attempt simpler day-lag correlation or more advanced ML that includes “ozone from the previous X days/weeks” as features to predict mortality rates.</li>
<li>but the stroke data is annual, so might consider that year’s or previous year’s average ozone as input.</li>
</ul>
<strong>Time Series + County Heterogeneity</strong>
<ul>
<li>Use a method that accounts for repeated measures by county.
<ul>
<li>E.g., a random forest where the rows are “(county, year)” with features:
<ul>
<li>Annual average ozone or “peak ozone days.”</li>
<li>Demographics (like median age, % race/ethnicity, etc.).</li>
<li>Year or region as a factor</li>
<li>The label is the heart disease or stroke mortality rate.</li>
<li>Evaluate variable importance or partial dependence to see how ozone contributes to predicted mortality</li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</section>
<section id="rates-and-trends-in-heart-disease-and-stroke-mortality-among-us-adults-stratified-by-age-group-race-and-ethnicity-and-sex-200-2009" class="level2" data-number="5.8">
<h2 data-number="5.8" class="anchored" data-anchor-id="rates-and-trends-in-heart-disease-and-stroke-mortality-among-us-adults-stratified-by-age-group-race-and-ethnicity-and-sex-200-2009"><span class="header-section-number">5.8</span> Rates and Trends in Heart Disease and Stroke Mortality Among US Adults Stratified by age group, race and ethnicity, and sex (200-2009)</h2>
<ul>
<li><strong>size</strong>: 1.21 GB, ~ 5.7 million rows</li>
<li><strong>contents</strong>: yearly county level data on stroke and heart disease stratefied by age group, race, and sex. - datavalue is continuous variable - data value units are percent and per 100,000 - data value types are age-standardized, spatiotemporally smoothed rate, total percent change - some data are suppressed - included high and low confidence limits - 3 stratification categories</li>
</ul>
<hr>
</section>
</section>
<section id="big-data-considerations" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Big Data Considerations</h1>
<ul>
<li><strong>File Sizes</strong>: Some CSVs exceed 10 GB, containing 100–175 million rows each, one of the close to half a billion rows (e.g., daily census tract ozone from 2001–2005).</li>
<li><strong>Computational Requirements</strong>: Memory-intensive to process. Potentially need chunk-based ingestion or distributed solutions (Dask, Spark, etc.). Just fixing the dates on the ozone data used up 98% of my installed 128 GB of CPU RAM</li>
<li><strong>Geospatial</strong>: Many datasets have county/census-tract FIPS codes or lat/long. This opens the door for advanced GIS analytics but also means more complex ingestion and joins with shapefiles or other reference data.</li>
</ul>
<hr>
</section>
<section id="integration-with-the-etl-rag-workflow-for-literature-analytics-on-ozone-levels-and-heart-disease" class="level1" data-number="7">
<h1 data-number="7"><span class="header-section-number">7</span> Integration with the ETL + RAG Workflow for literature analytics on ozone levels and heart disease</h1>
<section id="topic-modeling-research-gaps" class="level2" data-number="7.1">
<h2 data-number="7.1" class="anchored" data-anchor-id="topic-modeling-research-gaps"><span class="header-section-number">7.1</span> Topic Modeling &amp; Research Gaps</h2>
<ul>
<li><strong>A key new step is topic modeling and clustering to discover underexplored areas</strong></li>
</ul>
<ol type="1">
<li>Aggregate or fetch relevant PDFs (via PubMed, OpenAlex, Unpaywall) on ozone, cardiovascular disease (CVD), stroke, environmental epidemiology, and machine learning for big data</li>
<li>Extract text from each PDF (as before) and generate embeddings or tokenized data.</li>
<li>Run topic modeling/clustering (e.g., LDA or vector-based K-Means) on the corpus, producing clusters or “topics” that summarize major themes (e.g., “Ozone exposure in older adults,” “Regional NAAQS compliance,” “Machine-learning approaches in environmental epidemiology,” etc.).</li>
<li>use the LLM to label each topic, provide short descriptions, and highlight any “weakly populated” or contradictory clusters indicating knowledge gaps.</li>
<li>Focus on those gaps or subtopics by prompting the LLM to propose additional search queries (“What about ozone exposures specifically in understudied areas or populations, like rural counties or certain demographics?”).</li>
<li>Re-run the ETL pipeline with these new queries, pulling more targeted literature, then incrementally building a corpus that can inform the investigation on ozone + stroke.</li>
</ol>
<p>In short, the system helps expose <em>poorly covered or inconclusive domains</em>, which we can then map to the ozone/stroke data to propose new research questions.</p>
</section>
<section id="etl-phase" class="level2" data-number="7.2">
<h2 data-number="7.2" class="anchored" data-anchor-id="etl-phase"><span class="header-section-number">7.2</span> ETL Phase</h2>
<ul>
<li><p><strong>Previous:</strong>:</p>
<ul>
<li>The existing ETL script collects PDFs by searching for broad keywords (ozone, heart disease, machine learning, etc.) and extracts text and metadata into Zotero.</li>
</ul></li>
<li><p><strong>Updated</strong>:</p>
<ul>
<li>Initial Query &amp; Collection
<ul>
<li><p>still do a broad search (like “ozone + cardiovascular + epidemiology + big data”)</p></li>
<li><p>get 100–200 PDFs or as many as feasible</p></li>
</ul></li>
<li>Extract + Store
<ul>
<li>Parse text from PDFs, store references in Zotero, and push embeddings into vector DB</li>
</ul></li>
<li>Topic Modeling
<ul>
<li><p>Use an LDA or clustering script to generate 8–15 major topics.</p></li>
<li><p>An LLM interprets each topic, describing key coverage and potential missing angles (like “very few articles mention stroke in low ozone areas,” or “lack of cluster on chronic ozone exposure among pregnant women”).</p></li>
</ul></li>
<li>Refined Query Generation
<ul>
<li><p>The LLM proposes narrower queries to fill these specific gaps.</p></li>
<li><p>ETL re-crawls PubMed/OpenAlex, again extracts new PDFs, and merges them into the corpus</p></li>
</ul></li>
<li><strong>Repeat until we have a sufficiently deep literature set.</strong></li>
</ul></li>
</ul>
</section>
<section id="rag-phase-linking-literature-to-the-ozone-stroke-data" class="level2" data-number="7.3">
<h2 data-number="7.3" class="anchored" data-anchor-id="rag-phase-linking-literature-to-the-ozone-stroke-data"><span class="header-section-number">7.3</span> RAG Phase: Linking Literature to the Ozone &amp; Stroke Data</h2>
<ul>
<li>With the final curated corpus in place:</li>
</ul>
<ol type="1">
<li>Embedding &amp; Retrieval<br>
</li>
</ol>
<ul>
<li>Chunk each paper’s text and store embeddings</li>
<li>Use RAG to respond to user queries: “How does long-term ozone exposure affect stroke mortality in Southeastern states?”</li>
</ul>
<ol start="2" type="1">
<li>Chain-of-Thought + QA</li>
</ol>
<ul>
<li>The LLM consults the newly enriched literature set.</li>
<li>It merges textual references with the numeric (ozone/stroke) data if needed.</li>
<li>We see how well the existing research addresses my specific question; if coverage is sparse, that reaffirms a research gap.</li>
</ul>
<ol start="3" type="1">
<li>Connecting to the Ozone &amp; Stroke Datasets</li>
</ol>
<p>Because we have daily census-tract ozone data and county-level stroke mortality data, the system can highlight “No strong consensus or study” in certain subregions or demographic slices. If the LLM-based retrieval reveals minimal or contradicting references, we have a candidate for novel analysis: we can directly apply a big data approach to see if there is an actual association in those regions.</p>
</section>
<section id="potential-for-publication" class="level2" data-number="7.4">
<h2 data-number="7.4" class="anchored" data-anchor-id="potential-for-publication"><span class="header-section-number">7.4</span> Potential for Publication</h2>
<p>This dissertation is designed as a foundational research program with multiple avenues for scholarly publication, each corresponding to a specific research aim.</p>
<p><strong>1. A Methodological Contribution (from Aim 1):</strong> The AI-powered ETL+RAG pipeline itself represents a significant methodological innovation. The architecture, custom-developed modules, and the framework for systematic gap analysis are suitable for publication in a journal focused on computational social science, digital scholarship, or data science (<em>Journal of Open Source Software</em>, <em>Data Science Journal</em>, etc.). This paper would detail the system’s technical architecture and demonstrate its utility.</p>
<p><strong>2. An Environmental Epidemiology Study (from Aim 2):</strong> The baseline analysis of the relationship between county-level ozone exposure and cardiovascular disease mortality constitutes a classic epidemiological study. The findings, contextualized by the systematic literature review, would be suitable for submission to a public health or environmental science journal (<em>Environmental Health Perspectives</em>, <em>American Journal of Epidemiology</em>, etc.), contributing to the existing body of knowledge on ozone’s health impacts.</p>
<p><strong>3. A High-Impact Deep Learning Application (from Aim 3):</strong> This aim offers at least two high-impact publication opportunities:</p>
<ul>
<li><p><strong>A Technical Paper:</strong> The novel deep learning framework for identifying and monitoring UOG sites from multi-modal satellite data is a significant contribution to the fields of remote sensing and computer science. This paper would be targeted at a leading journal in those areas (<em>Remote Sensing of Environment</em>, <em>IEEE Transactions on Geoscience and Remote Sensing</em>, etc.).</p></li>
<li><p><strong>A Novel Epidemiological Study:</strong> The spatiotemporal inventory of UOG sites produced by the framework will be a unique and valuable dataset. A subsequent paper using this inventory to conduct a preliminary analysis of the association between UOG site proximity/activity and public health outcomes would represent a novel contribution to environmental health.</p></li>
</ul>
</section>
<section id="future-research-horizons-and-technical-scaling" class="level2" data-number="7.5">
<h2 data-number="7.5" class="anchored" data-anchor-id="future-research-horizons-and-technical-scaling"><span class="header-section-number">7.5</span> Future Research Horizons and Technical Scaling</h2>
<p>The completion of this dissertation will serve as the basis for future research directions and presents opportunities for significant technical scaling.</p>
<section id="technical-scaling-and-computational-frontiers" class="level3" data-number="7.5.1">
<h3 data-number="7.5.1" class="anchored" data-anchor-id="technical-scaling-and-computational-frontiers"><span class="header-section-number">7.5.1</span> Technical Scaling and Computational Frontiers</h3>
<ul>
<li><strong>Distributed Processing of Satellite Imagery:</strong> The methodology for Aim 3, while developed on a powerful single-node system, is designed for scalability. Future work will involve adapting the data preprocessing and CNN inference pipelines to run on distributed computing frameworks like Dask or Spark, enabling analysis of satellite imagery at a continental or global scale.</li>
<li><strong>Advanced Distributed Model Training:</strong> To further accelerate the training of the deep learning models, future iterations will explore distributed training strategies ( namely PyTorch’s <code>DistributedDataParallel</code>) across multiple GPU nodes on a high-performance computing (HPC) cluster.</li>
<li><strong>Fine-Tuning Domain-Specific LLMs:</strong> The ETL+RAG system generates a rich dataset of curated questions, contexts, and answers. A key future direction is to use this data to fine-tune a smaller, open-source language model (Llama 3, Mistral, Qwen3, etc.) specifically for environmental health literature, creating a highly specialized and efficient “expert” model.</li>
</ul>
</section>
<section id="future-research-directions" class="level3" data-number="7.5.2">
<h3 data-number="7.5.2" class="anchored" data-anchor-id="future-research-directions"><span class="header-section-number">7.5.2</span> Future Research Directions</h3>
<ul>
<li><strong>Integrated Multi-Pollutant Health Models:</strong> The datasets from Aim 2 (ozone) and Aim 3 (UOG/methane) can be combined to build sophisticated multi-pollutant models. Future research will investigate the synergistic or interactive effects of co-exposure to both ambient ozone and point-source pollutants from UOG sites on cardiovascular health.</li>
<li><strong>Public-Facing Environmental Data Platforms:</strong> A major goal is to translate the research outputs into tools with direct societal impact. Future work could involve developing an interactive web-based dashboard that allows the public, researchers, and policymakers to explore the spatiotemporal UOG inventory developed in Aim 3.</li>
<li><strong>Expansion to New Domains:</strong> The core ETL+RAG pipeline will be applied to new research domains to continuously test and validate its generalizability, such as analyzing literature on climate change adaptation strategies or emerging infectious diseases.</li>
</ul>
</section>
</section>
<section id="summary-of-assembled-data-assets" class="level2" data-number="7.6">
<h2 data-number="7.6" class="anchored" data-anchor-id="summary-of-assembled-data-assets"><span class="header-section-number">7.6</span> Summary of Assembled Data Assets</h2>
<p>The data collection and management phase of this dissertation has successfully outlined the acquisition and preparation of three distinct, large-scale data assets, each corresponding to a specific research aim:</p>
<ol type="1">
<li><p><strong>A Scholarly Literature Corpus:</strong> A comprehensive body of scientific articles from PubMed, OpenAlex, and Scopus, which serves as the primary input for the methodological gap analysis in <strong>Aim 1</strong>.</p></li>
<li><p><strong>Public Health and Environmental Data:</strong> A rich set of county and census-tract level data from the CDC, including historical ozone concentrations and cardiovascular disease mortality rates. This forms the foundation for the baseline epidemiological modeling in <strong>Aim 2</strong>.</p></li>
<li><p><strong>Remote Sensing and Geospatial Data:</strong> A planned collection of high-resolution optical and methane satellite imagery, supplemented by contextual LULC and tax parcel data. This will be the primary input for the novel deep learning framework developed in <strong>Aim 3</strong>.</p></li>
</ol>
<p>With these foundational data assets collected, processed, and managed, the subsequent chapters of this dissertation will proceed with the analytical execution of the research aims. We will begin with the systematic literature review informed by Aim 1, followed by the empirical analyses detailed in Aims 2 and 3.</p>
<hr>
</section>
</section>
<section id="machine-learning-aproaches-for-the-analysis" class="level1" data-number="8">
<h1 data-number="8"><span class="header-section-number">8</span> Machine Learning Aproaches for the Analysis</h1>
<ol type="1">
<li><strong>Random Forest or Gradient Boosting</strong>:</li>
</ol>
<ul>
<li>the label is e.g.&nbsp;“heart disease mortality” or “stroke mortality” in a given county-year.</li>
<li>Input features:
<ul>
<li>average O3, possibly max O3, or # of days &gt; 70 ppb</li>
<li>plus socioeconomic/demographic factors from the Census (like median income, age distribution, etc.).</li>
<li>measure how well the model predicts mortality across counties and time.</li>
</ul></li>
</ul>
<ol start="2" type="1">
<li><strong>Neural Network (Fully-Connected or simple LSTM)</strong>:</li>
</ol>
<ul>
<li>If i keep the data as a time-series for each county (like 14 years from 2001–2014), we could feed those sequences into an LSTM or 1D CNN.</li>
<li>However, that might be more advanced than needed, will need to use PyTorch or TensorFlow for geospatial analysis</li>
<li>LSTM = long short-term memory</li>
</ul>
<ol start="3" type="1">
<li><strong>Geospatial Splitting or Cross‐Validation</strong>:</li>
</ol>
<ul>
<li><p>can do a “spatial cross validation” approach. train on some subset of counties, test on other counties to see if the model generalizes to new geographic areas</p></li>
<li><p>should be a good “AI + geospatial data” method often used in environmental modeling.</p></li>
</ul>
<hr>
</section>
<section id="foundational-data-processing-a-demonstration" class="level1" data-number="9">
<h1 data-number="9"><span class="header-section-number">9</span> Foundational Data Processing: A Demonstration</h1>
<p>The following sections provide a practical demonstration of the initial data exploration and preprocessing challenges encountered during this project, particularly when handling the large-scale CDC datasets. While the final, production-level data pipeline was subsequently implemented in Python for enhanced performance and integration with deep learning libraries, these original R code snippets illustrate the foundational steps required.</p>
<p>They document the computational scale of the data—with files exceeding 100 million rows—and the necessity of techniques such as efficient file loading with <code>data.table</code>, parallelized processing to manage memory constraints, and complex data merges. This initial work was crucial in justifying the high-performance hardware and software architecture ultimately chosen for the dissertation’s primary analytical pipeline.</p>
<section id="load-libraries-and-set-up-environment" class="level2" data-number="9.1">
<h2 data-number="9.1" class="anchored" data-anchor-id="load-libraries-and-set-up-environment"><span class="header-section-number">9.1</span> Load Libraries and Set Up Environment</h2>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(flextable)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Hmisc)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(soiltexture)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arrow)       <span class="co"># For Feather export</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(parallel)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We load the parallel package for multi-core processing, arrow for Feather file writing, and data.table (via fread) to handle large CSVs efficiently.</p>
</section>
<section id="importing-the-data" class="level2" data-number="9.2">
<h2 data-number="9.2" class="anchored" data-anchor-id="importing-the-data"><span class="header-section-number">9.2</span> Importing the Data</h2>
<p>Below, we read the relevant CDC datasets. Note that some files exceed 10 GB, so fread() or chunk-based reading is used. Adjust paths as needed.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># PLACES data</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>places_gis_friendly_2020 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/PLACES_Place_Data_GIS_Friendly_Format_2020_release.csv"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>places_gis_ZCTA_2020     <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/PLACES_ZCTA_Data_GIS_Friendly_Format_2020_release.csv"</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="co"># SDOH measures for ZCTA ACS 2017-2021</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>SDOH_measures_for_zcta_acs <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/SDOH_Measures_for_ZCTA_ACS_2017-2021.csv"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># COVID-19 case surveillance with geography</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>covid_19_case_surveillance <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">fread</span>(<span class="st">"data/COVID-19_Case_Surveillance_Public_Use_Data_with_Geography.csv"</span>))</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co"># daily PM 2.5 county level 2001-2014</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>daily_pm_2_5 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/Daily_County-Level_PM2.5_Concentrations_2001-2014.csv"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Heart disease &amp; stroke mortality</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>stroke_mortality_state_county <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/Stroke_Mortality_Data_Among_US_Adults_35_by_State_Territory_and_County_2019-2021.csv"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>coronary_heart_disease_stroke <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/Rates_and_Trends_in_Coronary_Heart_Disease_and_Stroke_Mortality_Data_Among_US_Adults_35_by_County_1999-2018.csv"</span>)</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>heartdisease_stroke_mortality_adults <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(</span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fread</span>(<span class="st">"data/Rates_and_Trends_in_Heart_Disease_and_Stroke_Mortality_Among_US_Adults_35_by_County_Age_Group_Race_Ethnicity_and_Sex_2000-2019.csv"</span>)</span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="co"># Ozone data can be huge, so we use fread</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>daily_census_tract_ozone_2001_2005 <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(</span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fread</span>(<span class="st">"data/Daily_Census_Tract-Level_Ozone_Concentrations_2001-2005.csv"</span>)</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>daily_census_tract_ozone_2006_2010 <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fread</span>(<span class="st">"data/Daily_Census_Tract-Level_Ozone_Concentrations_2006-2010.csv"</span>)</span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a>daily_census_tract_ozone_2011_2014 <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(</span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fread</span>(<span class="st">"data/Daily_Census_Tract-Level_Ozone_Concentrations_2011-2014.csv"</span>)</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Note that eval is set to false, these are not files or code lines that someone may want to accidentally start</p>
</section>
<section id="summaries-with-multi-threading" class="level2" data-number="9.3">
<h2 data-number="9.3" class="anchored" data-anchor-id="summaries-with-multi-threading"><span class="header-section-number">9.3</span> Summaries with Multi-Threading</h2>
<p>Next, we define helper functions to summarize each column, then use parLapply to parallelize. We demonstrate it first on the heart disease &amp; stroke dataset, then on one portion of the ozone dataset.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define summarization for typical numeric/factor columns</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>summarize_column <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">threshold =</span> <span class="dv">20</span>) {</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  unique_vals <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">unique</span>(x))</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.numeric</span>(x) <span class="sc">&amp;&amp;</span> <span class="fu">length</span>(unique_vals) <span class="sc">&gt;</span> threshold) {</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>    summ <span class="ot">&lt;-</span> <span class="fu">summary</span>(x)</span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">paste</span>(<span class="st">"Continuous variable summary:"</span>,</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"Min:"</span>, summ[<span class="st">"Min."</span>],</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"1st Qu.:"</span>, summ[<span class="st">"1st Qu."</span>],</span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"Median:"</span>, summ[<span class="st">"Median"</span>],</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"Mean:"</span>, <span class="fu">round</span>(<span class="fu">as.numeric</span>(summ[<span class="st">"Mean"</span>]), <span class="dv">2</span>),</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"3rd Qu.:"</span>, summ[<span class="st">"3rd Qu."</span>],</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"Max:"</span>, summ[<span class="st">"Max."</span>]))</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">paste</span>(unique_vals, <span class="at">collapse =</span> <span class="st">", "</span>))</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="co"># For ozone data (which can have many numeric columns)</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>summarize_column_ozone <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">threshold =</span> <span class="dv">20</span>, <span class="at">sample_size =</span> <span class="dv">20</span>) {</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  unique_vals <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">unique</span>(x))</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.numeric</span>(x) <span class="sc">&amp;&amp;</span> <span class="fu">length</span>(unique_vals) <span class="sc">&gt;</span> threshold) {</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>    summ <span class="ot">&lt;-</span> <span class="fu">summary</span>(x)</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">paste</span>(<span class="st">"Continuous variable summary:"</span>,</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"Min:"</span>, summ[<span class="st">"Min."</span>],</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"1st Qu.:"</span>, summ[<span class="st">"1st Qu."</span>],</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"Median:"</span>, summ[<span class="st">"Median"</span>],</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"Mean:"</span>, <span class="fu">round</span>(<span class="fu">as.numeric</span>(summ[<span class="st">"Mean"</span>]), <span class="dv">2</span>),</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"3rd Qu.:"</span>, summ[<span class="st">"3rd Qu."</span>],</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"Max:"</span>, summ[<span class="st">"Max."</span>]))</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span>(<span class="fu">length</span>(unique_vals) <span class="sc">&gt;</span> sample_size) {</span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>    sampled_vals <span class="ot">&lt;-</span> <span class="fu">sample</span>(unique_vals, sample_size)</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">paste</span>(sampled_vals, <span class="at">collapse =</span> <span class="st">", "</span>))</span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">paste</span>(unique_vals, <span class="at">collapse =</span> <span class="st">", "</span>))</span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a cluster</span></span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>n_cores <span class="ot">&lt;-</span> <span class="fu">detectCores</span>() <span class="sc">-</span> <span class="dv">2</span></span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>cl <span class="ot">&lt;-</span> <span class="fu">makeCluster</span>(n_cores)</span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize columns of heart disease/stroke data</span></span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a><span class="fu">clusterExport</span>(cl, <span class="at">varlist =</span> <span class="fu">c</span>(<span class="st">"summarize_column"</span>), <span class="at">envir =</span> <span class="fu">environment</span>())</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>result_list_hd <span class="ot">&lt;-</span> <span class="fu">parLapply</span>(cl, heartdisease_stroke_mortality_adults, summarize_column)</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>result_hd      <span class="ot">&lt;-</span> <span class="fu">unlist</span>(result_list_hd)</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>result_df_hd   <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Column =</span> <span class="fu">names</span>(result_hd),</span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>                             <span class="at">Summary =</span> <span class="fu">as.character</span>(result_hd),</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>                             <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">head</span>(result_df_hd, <span class="dv">10</span>))  <span class="co"># just preview</span></span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize columns for 2001-2005 ozone data</span></span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a><span class="fu">clusterExport</span>(cl, <span class="at">varlist =</span> <span class="fu">c</span>(<span class="st">"summarize_column_ozone"</span>), <span class="at">envir =</span> <span class="fu">environment</span>())</span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>result_list_o <span class="ot">&lt;-</span> <span class="fu">parLapply</span>(cl, daily_census_tract_ozone_2001_2005, summarize_column_ozone)</span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>result_o      <span class="ot">&lt;-</span> <span class="fu">unlist</span>(result_list_o)</span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>result_df_o   <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Column =</span> <span class="fu">names</span>(result_o),</span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>                            <span class="at">Summary =</span> <span class="fu">as.character</span>(result_o),</span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>                            <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">head</span>(result_df_o, <span class="dv">10</span>))</span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a><span class="fu">stopCluster</span>(cl)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Above, you can see how we parallelize the summary using parLapply.</p>
</section>
<section id="merge-standardize-ozone-data" class="level2" data-number="9.4">
<h2 data-number="9.4" class="anchored" data-anchor-id="merge-standardize-ozone-data"><span class="header-section-number">9.4</span> Merge &amp; Standardize Ozone Data</h2>
<p>The next step is standardizing column names, converting date strings with lubridate, and merging all three ozone subsets into a single data.table. Then we write the final table to a Feather file.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: unify column names for the 2011-2014 dataset</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">setnames</span>(daily_census_tract_ozone_2011_2014,</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">old =</span> <span class="fu">c</span>(<span class="st">"ds_o3_pred"</span>, <span class="st">"ds_o3_stdd"</span>),</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">new =</span> <span class="fu">c</span>(<span class="st">"DS_O3_pred"</span>, <span class="st">"DS_O3_stdd"</span>))</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Put the three ozone data frames in a list</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>ozone_list <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  daily_census_tract_ozone_2001_2005,</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  daily_census_tract_ozone_2006_2010,</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  daily_census_tract_ozone_2011_2014</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert date using parallel again</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>convert_date <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>date <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(df<span class="sc">$</span>date)</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  df</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>cl2 <span class="ot">&lt;-</span> <span class="fu">makeCluster</span>(<span class="fu">detectCores</span>() <span class="sc">-</span> <span class="dv">2</span>)</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="fu">clusterEvalQ</span>(cl2, <span class="fu">library</span>(lubridate))</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="fu">clusterExport</span>(cl2, <span class="at">varlist =</span> <span class="fu">c</span>(<span class="st">"convert_date"</span>), <span class="at">envir =</span> <span class="fu">environment</span>())</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>ozone_list_converted <span class="ot">&lt;-</span> <span class="fu">parLapply</span>(cl2, ozone_list, convert_date)</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="fu">stopCluster</span>(cl2)</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge with rbindlist</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>daily_ozone_all <span class="ot">&lt;-</span> data.table<span class="sc">::</span><span class="fu">rbindlist</span>(ozone_list_converted, <span class="at">use.names =</span> <span class="cn">TRUE</span>, <span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Quick check</span></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(daily_ozone_all<span class="sc">$</span>date)</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a><span class="co"># Save as feather (reduces from ~27 GB to ~13 GB)</span></span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>arrow<span class="sc">::</span><span class="fu">write_feather</span>(daily_ozone_all, </span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>  <span class="st">"data/daily_census_tract_ozone_2001_2014.feather"</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="export-other-datasets-as-feather" class="level2" data-number="9.5">
<h2 data-number="9.5" class="anchored" data-anchor-id="export-other-datasets-as-feather"><span class="header-section-number">9.5</span> Export Other Datasets as Feather</h2>
<p>Finally, any large data frames (such as heart disease/stroke mortality) can also be exported:</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>arrow<span class="sc">::</span><span class="fu">write_feather</span>(</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  heartdisease_stroke_mortality_adults, </span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>  <span class="st">"data/HeartDisease_StrokeMortality.feather"</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<hr>
<p><em>That’s it for now</em> in terms of describing the possible data collection approach. As the project evolves, I might refine exactly how these datasets are integrated and whether I keep them in a separate Big Data environment or incorporate them directly into the pipeline.</p>


<!-- -->

</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./01-proposal.html" class="pagination-link" aria-label="Literature Analytics and Methodological Gap Analysis in Geospatial Epidemiology">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Literature Analytics and Methodological Gap Analysis in Geospatial Epidemiology</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./03-literature-review.html" class="pagination-link" aria-label="Literature Review">
        <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Literature Review</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb6" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu"># Data Collection</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>In this section, I describe the key data sources that could be leveraged for this project. </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>Initially, my ETL + RAG pipeline was designed to extract data from PDF academic papers. </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>However, I also have access to large, geocoded CDC datasets that might be integrated into the overall analysis (particularly if I choose to focus on epidemiological or spatial questions). after a brief exploratory analysis of the datasets, their should be enough context to feed queries into the ETL + RAG system to identify research gaps and use this system to fill them</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="fu"># Purpose and Relevance</span></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>While the initial project was an **AI-powered ETL &amp; RAG pipeline** for literature analytics, </span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>the same pipeline could be adapted to identify research gaps and create unique insights into **public health** or **geospatial** phenomena. </span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>I am considering including these CDC datasets for either:</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>**Enriching** the final analysis with real-world data (e.g., linking extracted references about “cardiovascular health” to real incidence or mortality data from the CDC).</span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Demonstrating** how big data ingestion (on the order of hundreds of millions of rows)   can be integrated into the workflow, giving the pipeline a broader scope of queries (e.g., </span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a>  “What are the trends in stroke mortality by county, and which papers discuss new stroke </span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>   interventions?” "what machine learning aproaches have yet to be used for spatialtemporal analysis between ozone exposure and heart disease?").</span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a><span class="fu"># Overview of Available Datasets</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a><span class="fu">## CDC 500 Cities Project (2016–2019)</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Focus**: Provided tract-level estimates for chronic disease risk factors and outcomes </span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>  (e.g., smoking prevalence, obesity, diabetes) within the largest 500 US cities.</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Format &amp; Size**: Over 28,000 census tracts across ~500 cities. Population coverage of over 100 million.</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Potential Use Case**: Could cross-reference academic articles discussing urban health interventions </span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>  with actual city-level data on risk factors (via the RAG pipeline’s references).</span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a><span class="fu">## Nationwide Blood Donor Seroprevalence Survey (2022–2023)</span></span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Focus**: SARS-CoV-2 (COVID-19) antibody testing among blood donors, capturing infection- </span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>  and vaccine-induced seroprevalence.</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Data**: De-identified blood samples tested for anti-spike (vaccinated or previously infected) </span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>  vs. anti-nucleocapsid (infection-only) antibodies. </span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Potential Use Case**: Combine with academic literature on vaccination strategies or </span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>  compare the pipeline’s reference retrieval on “COVID-19 seroprevalence” to real, </span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>  up-to-date trends.</span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a><span class="fu">## PM&lt;sub&gt;2.5&lt;/sub&gt; and Ozone Concentrations</span></span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Daily County-Level PM&lt;sub&gt;2.5&lt;/sub&gt; (2001–2019)** </span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Daily Census-Tract-Level Ozone** (2001–2005, 2006–2010, 2011–2014)</span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Size**: Up to 11 GB or more, with 100M+ rows in certain files.</span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Spatial Coverage**: Each row has FIPS codes and lat/long coordinates for geospatial analysis.</span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Potential Use Case**: If the project investigates air quality or environment-related health outcomes </span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a>  and references environment-based interventions (e.g., “cover crops to reduce air pollutants </span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a>  or improve soil health”), the pipeline could unify the references about environmental </span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>  intervention strategies with real local air quality data.</span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a><span class="fu">## PLACES Measures (Expanded from 500 Cities)</span></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Focus**: Health outcomes, preventive measures, risk behaviors, disabilities, and more. </span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>  This extends the 500 Cities concept to every county, place, and census tract in the United States. </span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Format**: Data measures in multiple categories: (1) Health Outcomes, (2) Prevention, </span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>  (3) Risk Behaviors, (4) Disabilities, (5) Social Determinants, etc.</span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Potential Use Case**: Tie in references discussing health disparities or social determinants </span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>  of health to actual local or census-tract-level data on risk factors.</span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a><span class="fu">## State/County Mortality Datasets</span></span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Coronary Heart Disease &amp; Stroke** </span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**HeartDisease_Stroke_Mortality_Adults** (≥35 years)</span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Stroke_Mortality_State_County** </span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Focus**: Mortality rates, changes over time, demographic breakdowns (race, age, sex), </span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a>  all georeferenced by county or sometimes census tract.</span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Potential Use Case**: Link references to **epidemiological** insights about heart disease or stroke </span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a>  with the real aggregated data for analysis or cross-validation.</span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a><span class="fu">## COVID-19 Case Surveillance Data</span></span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Size**: ~14 GB, 106+ million rows. </span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Contents**: De-identified line-level data for COVID-19 cases (date of symptom onset, demographic info, </span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a>  comorbidities, etc.).</span>
<span id="cb6-73"><a href="#cb6-73" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Potential Use Case**: Potential to pair large-scale case counts or demographic breakdowns with </span>
<span id="cb6-74"><a href="#cb6-74" aria-hidden="true" tabindex="-1"></a>  references describing COVID-19 interventions or analyses. </span>
<span id="cb6-75"><a href="#cb6-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-76"><a href="#cb6-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-77"><a href="#cb6-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-78"><a href="#cb6-78" aria-hidden="true" tabindex="-1"></a><span class="fu">## Daily Census Tract level Ozone Concentrations 2001-2015</span></span>
<span id="cb6-79"><a href="#cb6-79" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**size**: 27.62 GB, 412 million rows</span>
<span id="cb6-80"><a href="#cb6-80" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**colnames**:  "year"       "date"       "statefips"  "countyfips" "ctfips"     "latitude"   "longitude"  "DS_O3_pred" "DS_O3_stdd"</span>
<span id="cb6-81"><a href="#cb6-81" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Contents**: census tract level daily Ozone metrics</span>
<span id="cb6-82"><a href="#cb6-82" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Potential use Case**: </span>
<span id="cb6-83"><a href="#cb6-83" aria-hidden="true" tabindex="-1"></a>    **Time-Series or Panel Regression**</span>
<span id="cb6-84"><a href="#cb6-84" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>longitudinal or panel model that includes each county across multiple years.</span>
<span id="cb6-85"><a href="#cb6-85" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>run a machine-learning approach (like a random forest regression or XGBoost) to see if ozone is predictive of heart disease/stroke mortality</span>
<span id="cb6-86"><a href="#cb6-86" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>incorporate geospatial features (e.g., a “neighbors” matrix or geospatial embedding) in more advanced models</span>
<span id="cb6-87"><a href="#cb6-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-88"><a href="#cb6-88" aria-hidden="true" tabindex="-1"></a>    **Spatiotemporal Clustering or Hotspot Detection**</span>
<span id="cb6-89"><a href="#cb6-89" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>identify “hotspots” of high ozone vs. “hotspots” of high stroke mortality over time.</span>
<span id="cb6-90"><a href="#cb6-90" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Compare them visually and quantitatively</span>
<span id="cb6-91"><a href="#cb6-91" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>do clusters of elevated ozone correlate with clusters of elevated stroke mortality?</span>
<span id="cb6-92"><a href="#cb6-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-93"><a href="#cb6-93" aria-hidden="true" tabindex="-1"></a>    **Lag or Distributed‐Lag Models**</span>
<span id="cb6-94"><a href="#cb6-94" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Often in environmental epidemiology, the effect of ozone on cardiovascular outcomes can have a short-term or delayed effect (like a lag of a few days or weeks)</span>
<span id="cb6-95"><a href="#cb6-95" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>might attempt simpler day-lag correlation or more advanced ML that includes “ozone from the previous X days/weeks” as features to predict mortality rates.</span>
<span id="cb6-96"><a href="#cb6-96" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>but the stroke data is annual, so might consider that year’s or previous year’s average ozone as input.</span>
<span id="cb6-97"><a href="#cb6-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-98"><a href="#cb6-98" aria-hidden="true" tabindex="-1"></a>    **Time Series + County Heterogeneity**</span>
<span id="cb6-99"><a href="#cb6-99" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Use a method that accounts for repeated measures by county.</span>
<span id="cb6-100"><a href="#cb6-100" aria-hidden="true" tabindex="-1"></a><span class="ss">      - </span>E.g., a random forest where the rows are “(county, year)” with features:</span>
<span id="cb6-101"><a href="#cb6-101" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Annual average ozone or “peak ozone days.”</span>
<span id="cb6-102"><a href="#cb6-102" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Demographics (like median age, % race/ethnicity, etc.).</span>
<span id="cb6-103"><a href="#cb6-103" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Year or region as a factor</span>
<span id="cb6-104"><a href="#cb6-104" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>The label is the heart disease or stroke mortality rate.</span>
<span id="cb6-105"><a href="#cb6-105" aria-hidden="true" tabindex="-1"></a><span class="ss">        - </span>Evaluate variable importance or partial dependence to see how ozone contributes to predicted mortality</span>
<span id="cb6-106"><a href="#cb6-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-107"><a href="#cb6-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-108"><a href="#cb6-108" aria-hidden="true" tabindex="-1"></a><span class="fu">## Rates and Trends in Heart Disease and Stroke Mortality Among US Adults Stratified by age group, race and ethnicity, and sex (200-2009)</span></span>
<span id="cb6-109"><a href="#cb6-109" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**size**: 1.21 GB, ~ 5.7 million rows</span>
<span id="cb6-110"><a href="#cb6-110" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**contents**: yearly county level data on stroke and heart disease stratefied by age group, race, and sex. </span>
<span id="cb6-111"><a href="#cb6-111" aria-hidden="true" tabindex="-1"></a><span class="ss">      - </span>datavalue is continuous variable</span>
<span id="cb6-112"><a href="#cb6-112" aria-hidden="true" tabindex="-1"></a><span class="ss">      - </span>data value units are percent and per 100,000</span>
<span id="cb6-113"><a href="#cb6-113" aria-hidden="true" tabindex="-1"></a><span class="ss">      - </span>data value types are age-standardized, spatiotemporally smoothed rate, total percent change</span>
<span id="cb6-114"><a href="#cb6-114" aria-hidden="true" tabindex="-1"></a><span class="ss">      - </span>some data are suppressed</span>
<span id="cb6-115"><a href="#cb6-115" aria-hidden="true" tabindex="-1"></a><span class="ss">      - </span>included high and low confidence limits</span>
<span id="cb6-116"><a href="#cb6-116" aria-hidden="true" tabindex="-1"></a><span class="ss">      - </span>3 stratification categories</span>
<span id="cb6-117"><a href="#cb6-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-118"><a href="#cb6-118" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb6-119"><a href="#cb6-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-120"><a href="#cb6-120" aria-hidden="true" tabindex="-1"></a><span class="fu"># Big Data Considerations</span></span>
<span id="cb6-121"><a href="#cb6-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-122"><a href="#cb6-122" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**File Sizes**: Some CSVs exceed 10 GB, containing 100–175 million rows each, one of the close to half a billion rows</span>
<span id="cb6-123"><a href="#cb6-123" aria-hidden="true" tabindex="-1"></a>  (e.g., daily census tract ozone from 2001–2005).</span>
<span id="cb6-124"><a href="#cb6-124" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Computational Requirements**: Memory-intensive to process. Potentially need chunk-based ingestion or </span>
<span id="cb6-125"><a href="#cb6-125" aria-hidden="true" tabindex="-1"></a>  distributed solutions (Dask, Spark, etc.). Just fixing the dates on the ozone data used up 98% of my installed 128 GB of CPU RAM</span>
<span id="cb6-126"><a href="#cb6-126" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Geospatial**: Many datasets have county/census-tract FIPS codes or lat/long. </span>
<span id="cb6-127"><a href="#cb6-127" aria-hidden="true" tabindex="-1"></a>  This opens the door for advanced GIS analytics but also means more complex ingestion and </span>
<span id="cb6-128"><a href="#cb6-128" aria-hidden="true" tabindex="-1"></a>  joins with shapefiles or other reference data.</span>
<span id="cb6-129"><a href="#cb6-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-130"><a href="#cb6-130" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb6-131"><a href="#cb6-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-132"><a href="#cb6-132" aria-hidden="true" tabindex="-1"></a><span class="fu"># Integration with the ETL + RAG Workflow for literature analytics on ozone levels and heart disease</span></span>
<span id="cb6-133"><a href="#cb6-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-134"><a href="#cb6-134" aria-hidden="true" tabindex="-1"></a><span class="fu">## Topic Modeling &amp; Research Gaps</span></span>
<span id="cb6-135"><a href="#cb6-135" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>**A key new step is topic modeling and clustering to discover underexplored areas**</span>
<span id="cb6-136"><a href="#cb6-136" aria-hidden="true" tabindex="-1"></a><span class="ss">  1. </span>Aggregate or fetch relevant PDFs (via PubMed, OpenAlex, Unpaywall) on ozone, cardiovascular disease (CVD), stroke, environmental epidemiology, and machine learning for big data</span>
<span id="cb6-137"><a href="#cb6-137" aria-hidden="true" tabindex="-1"></a><span class="ss">  2. </span>Extract text from each PDF (as before) and generate embeddings or tokenized data.</span>
<span id="cb6-138"><a href="#cb6-138" aria-hidden="true" tabindex="-1"></a><span class="ss">  3. </span>Run topic modeling/clustering (e.g., LDA or vector-based K-Means) on the corpus, producing clusters or “topics” that summarize major themes (e.g., “Ozone exposure in older adults,” “Regional NAAQS compliance,” “Machine-learning approaches in environmental epidemiology,” etc.).</span>
<span id="cb6-139"><a href="#cb6-139" aria-hidden="true" tabindex="-1"></a><span class="ss">  4. </span>use the LLM to label each topic, provide short descriptions, and highlight any “weakly populated” or contradictory clusters indicating knowledge gaps.</span>
<span id="cb6-140"><a href="#cb6-140" aria-hidden="true" tabindex="-1"></a><span class="ss">  5. </span>Focus on those gaps or subtopics by prompting the LLM to propose additional search queries (“What about ozone exposures specifically in understudied areas or populations, like rural counties or certain demographics?”).</span>
<span id="cb6-141"><a href="#cb6-141" aria-hidden="true" tabindex="-1"></a><span class="ss">  6. </span>Re-run the ETL pipeline with these new queries, pulling more targeted literature, then incrementally building a corpus that can inform the investigation on ozone + stroke.</span>
<span id="cb6-142"><a href="#cb6-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-143"><a href="#cb6-143" aria-hidden="true" tabindex="-1"></a>  In short, the system helps expose *poorly covered or inconclusive domains*, which we can then map to the ozone/stroke data to propose new research questions.</span>
<span id="cb6-144"><a href="#cb6-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-145"><a href="#cb6-145" aria-hidden="true" tabindex="-1"></a><span class="fu">## ETL Phase</span></span>
<span id="cb6-146"><a href="#cb6-146" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Previous:**: </span>
<span id="cb6-147"><a href="#cb6-147" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-148"><a href="#cb6-148" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>The existing ETL script collects PDFs by searching for broad keywords (ozone, heart disease, machine learning, etc.) and extracts text and metadata into Zotero.</span>
<span id="cb6-149"><a href="#cb6-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-150"><a href="#cb6-150" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Updated**: </span>
<span id="cb6-151"><a href="#cb6-151" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Initial Query &amp; Collection  </span>
<span id="cb6-152"><a href="#cb6-152" aria-hidden="true" tabindex="-1"></a><span class="ss">      - </span>still do a broad search (like “ozone + cardiovascular + epidemiology + big data”)</span>
<span id="cb6-153"><a href="#cb6-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-154"><a href="#cb6-154" aria-hidden="true" tabindex="-1"></a><span class="ss">      - </span>get 100–200 PDFs or as many as feasible</span>
<span id="cb6-155"><a href="#cb6-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-156"><a href="#cb6-156" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Extract + Store  </span>
<span id="cb6-157"><a href="#cb6-157" aria-hidden="true" tabindex="-1"></a><span class="ss">      - </span>Parse text from PDFs, store references in Zotero, and push embeddings into vector DB </span>
<span id="cb6-158"><a href="#cb6-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-159"><a href="#cb6-159" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Topic Modeling  </span>
<span id="cb6-160"><a href="#cb6-160" aria-hidden="true" tabindex="-1"></a><span class="ss">      - </span>Use an LDA or clustering script to generate 8–15 major topics.  </span>
<span id="cb6-161"><a href="#cb6-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-162"><a href="#cb6-162" aria-hidden="true" tabindex="-1"></a><span class="ss">      - </span>An LLM interprets each topic, describing key coverage and potential missing angles (like “very few articles mention stroke in low ozone areas,” or “lack of cluster on chronic ozone exposure among pregnant women”).</span>
<span id="cb6-163"><a href="#cb6-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-164"><a href="#cb6-164" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>Refined Query Generation</span>
<span id="cb6-165"><a href="#cb6-165" aria-hidden="true" tabindex="-1"></a><span class="ss">      - </span>The LLM proposes narrower queries to fill these specific gaps.</span>
<span id="cb6-166"><a href="#cb6-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-167"><a href="#cb6-167" aria-hidden="true" tabindex="-1"></a><span class="ss">      - </span>ETL re-crawls PubMed/OpenAlex, again extracts new PDFs, and merges them into the corpus</span>
<span id="cb6-168"><a href="#cb6-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-169"><a href="#cb6-169" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>**Repeat until we have a sufficiently deep literature set.**</span>
<span id="cb6-170"><a href="#cb6-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-171"><a href="#cb6-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-172"><a href="#cb6-172" aria-hidden="true" tabindex="-1"></a><span class="fu">## RAG Phase: Linking Literature to the Ozone &amp; Stroke Data</span></span>
<span id="cb6-173"><a href="#cb6-173" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>With the final curated corpus in place:</span>
<span id="cb6-174"><a href="#cb6-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-175"><a href="#cb6-175" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>Embedding &amp; Retrieval  </span>
<span id="cb6-176"><a href="#cb6-176" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Chunk each paper’s text and store embeddings</span>
<span id="cb6-177"><a href="#cb6-177" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Use RAG to respond to user queries: “How does long-term ozone exposure affect stroke mortality in Southeastern states?”</span>
<span id="cb6-178"><a href="#cb6-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-179"><a href="#cb6-179" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>Chain-of-Thought + QA</span>
<span id="cb6-180"><a href="#cb6-180" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>The LLM consults the newly enriched literature set.</span>
<span id="cb6-181"><a href="#cb6-181" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>It merges textual references with the numeric (ozone/stroke) data if needed.</span>
<span id="cb6-182"><a href="#cb6-182" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>We see how well the existing research addresses my specific question; if coverage is sparse, that reaffirms a research gap.</span>
<span id="cb6-183"><a href="#cb6-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-184"><a href="#cb6-184" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>Connecting to the Ozone &amp; Stroke Datasets</span>
<span id="cb6-185"><a href="#cb6-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-186"><a href="#cb6-186" aria-hidden="true" tabindex="-1"></a>Because we have daily census-tract ozone data and county-level stroke mortality data, the system can highlight “No strong consensus or study” in certain subregions or demographic slices. If the LLM-based retrieval reveals minimal or contradicting references, we have a candidate for novel analysis: we can directly apply a big data approach to see if there is an actual association in those regions.</span>
<span id="cb6-187"><a href="#cb6-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-188"><a href="#cb6-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-189"><a href="#cb6-189" aria-hidden="true" tabindex="-1"></a><span class="fu">## Potential for Publication</span></span>
<span id="cb6-190"><a href="#cb6-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-191"><a href="#cb6-191" aria-hidden="true" tabindex="-1"></a>This dissertation is designed as a foundational research program with multiple avenues for scholarly publication, each corresponding to a specific research aim.</span>
<span id="cb6-192"><a href="#cb6-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-193"><a href="#cb6-193" aria-hidden="true" tabindex="-1"></a>**1. A Methodological Contribution (from Aim 1):**</span>
<span id="cb6-194"><a href="#cb6-194" aria-hidden="true" tabindex="-1"></a>The AI-powered ETL+RAG pipeline itself represents a significant methodological innovation. The architecture, custom-developed modules, and the framework for systematic gap analysis are suitable for publication in a journal focused on computational social science, digital scholarship, or data science (*Journal of Open Source Software*, *Data Science Journal*, etc.). This paper would detail the system's technical architecture and demonstrate its utility.</span>
<span id="cb6-195"><a href="#cb6-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-196"><a href="#cb6-196" aria-hidden="true" tabindex="-1"></a>**2. An Environmental Epidemiology Study (from Aim 2):**</span>
<span id="cb6-197"><a href="#cb6-197" aria-hidden="true" tabindex="-1"></a>The baseline analysis of the relationship between county-level ozone exposure and cardiovascular disease mortality constitutes a classic epidemiological study. The findings, contextualized by the systematic literature review, would be suitable for submission to a public health or environmental science journal (*Environmental Health Perspectives*, *American Journal of Epidemiology*, etc.), contributing to the existing body of knowledge on ozone's health impacts.</span>
<span id="cb6-198"><a href="#cb6-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-199"><a href="#cb6-199" aria-hidden="true" tabindex="-1"></a>**3. A High-Impact Deep Learning Application (from Aim 3):**</span>
<span id="cb6-200"><a href="#cb6-200" aria-hidden="true" tabindex="-1"></a>This aim offers at least two high-impact publication opportunities:</span>
<span id="cb6-201"><a href="#cb6-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-202"><a href="#cb6-202" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**A Technical Paper:** The novel deep learning framework for identifying and monitoring UOG sites from multi-modal satellite data is a significant contribution to the fields of remote sensing and computer science. This paper would be targeted at a leading journal in those areas (*Remote Sensing of Environment*, *IEEE Transactions on Geoscience and Remote Sensing*, etc.).</span>
<span id="cb6-203"><a href="#cb6-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-204"><a href="#cb6-204" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**A Novel Epidemiological Study:** The spatiotemporal inventory of UOG sites produced by the framework will be a unique and valuable dataset. A subsequent paper using this inventory to conduct a preliminary analysis of the association between UOG site proximity/activity and public health outcomes would represent a novel contribution to environmental health.</span>
<span id="cb6-205"><a href="#cb6-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-206"><a href="#cb6-206" aria-hidden="true" tabindex="-1"></a><span class="fu">## Future Research Horizons and Technical Scaling</span></span>
<span id="cb6-207"><a href="#cb6-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-208"><a href="#cb6-208" aria-hidden="true" tabindex="-1"></a>The completion of this dissertation will serve as the basis for future research directions and presents opportunities for significant technical scaling.</span>
<span id="cb6-209"><a href="#cb6-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-210"><a href="#cb6-210" aria-hidden="true" tabindex="-1"></a><span class="fu">### Technical Scaling and Computational Frontiers</span></span>
<span id="cb6-211"><a href="#cb6-211" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Distributed Processing of Satellite Imagery:** The methodology for Aim 3, while developed on a powerful single-node system, is designed for scalability. Future work will involve adapting the data preprocessing and CNN inference pipelines to run on distributed computing frameworks like Dask or Spark, enabling analysis of satellite imagery at a continental or global scale.</span>
<span id="cb6-212"><a href="#cb6-212" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Advanced Distributed Model Training:** To further accelerate the training of the deep learning models, future iterations will explore distributed training strategies ( namely PyTorch's <span class="in">`DistributedDataParallel`</span>) across multiple GPU nodes on a high-performance computing (HPC) cluster.</span>
<span id="cb6-213"><a href="#cb6-213" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Fine-Tuning Domain-Specific LLMs:** The ETL+RAG system generates a rich dataset of curated questions, contexts, and answers. A key future direction is to use this data to fine-tune a smaller, open-source language model (Llama 3, Mistral, Qwen3, etc.) specifically for environmental health literature, creating a highly specialized and efficient "expert" model.</span>
<span id="cb6-214"><a href="#cb6-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-215"><a href="#cb6-215" aria-hidden="true" tabindex="-1"></a><span class="fu">### Future Research Directions</span></span>
<span id="cb6-216"><a href="#cb6-216" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Integrated Multi-Pollutant Health Models:** The datasets from Aim 2 (ozone) and Aim 3 (UOG/methane) can be combined to build sophisticated multi-pollutant models. Future research will investigate the synergistic or interactive effects of co-exposure to both ambient ozone and point-source pollutants from UOG sites on cardiovascular health.</span>
<span id="cb6-217"><a href="#cb6-217" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Public-Facing Environmental Data Platforms:** A major goal is to translate the research outputs into tools with direct societal impact. Future work could involve developing an interactive web-based dashboard that allows the public, researchers, and policymakers to explore the spatiotemporal UOG inventory developed in Aim 3.</span>
<span id="cb6-218"><a href="#cb6-218" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Expansion to New Domains:** The core ETL+RAG pipeline will be applied to new research domains to continuously test and validate its generalizability, such as analyzing literature on climate change adaptation strategies or emerging infectious diseases.</span>
<span id="cb6-219"><a href="#cb6-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-220"><a href="#cb6-220" aria-hidden="true" tabindex="-1"></a><span class="fu">## Summary of Assembled Data Assets</span></span>
<span id="cb6-221"><a href="#cb6-221" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-222"><a href="#cb6-222" aria-hidden="true" tabindex="-1"></a>The data collection and management phase of this dissertation has successfully outlined the acquisition and preparation of three distinct, large-scale data assets, each corresponding to a specific research aim:</span>
<span id="cb6-223"><a href="#cb6-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-224"><a href="#cb6-224" aria-hidden="true" tabindex="-1"></a><span class="ss">1.  </span>**A Scholarly Literature Corpus:** A comprehensive body of scientific articles from PubMed, OpenAlex, and Scopus, which serves as the primary input for the methodological gap analysis in **Aim 1**.</span>
<span id="cb6-225"><a href="#cb6-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-226"><a href="#cb6-226" aria-hidden="true" tabindex="-1"></a><span class="ss">2.  </span>**Public Health and Environmental Data:** A rich set of county and census-tract level data from the CDC, including historical ozone concentrations and cardiovascular disease mortality rates. This forms the foundation for the baseline epidemiological modeling in **Aim 2**.</span>
<span id="cb6-227"><a href="#cb6-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-228"><a href="#cb6-228" aria-hidden="true" tabindex="-1"></a><span class="ss">3.  </span>**Remote Sensing and Geospatial Data:** A planned collection of high-resolution optical and methane satellite imagery, supplemented by contextual LULC and tax parcel data. This will be the primary input for the novel deep learning framework developed in **Aim 3**.</span>
<span id="cb6-229"><a href="#cb6-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-230"><a href="#cb6-230" aria-hidden="true" tabindex="-1"></a>With these foundational data assets collected, processed, and managed, the subsequent chapters of this dissertation will proceed with the analytical execution of the research aims. We will begin with the systematic literature review informed by Aim 1, followed by the empirical analyses detailed in Aims 2 and 3.</span>
<span id="cb6-231"><a href="#cb6-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-232"><a href="#cb6-232" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb6-233"><a href="#cb6-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-234"><a href="#cb6-234" aria-hidden="true" tabindex="-1"></a><span class="fu"># Machine Learning Aproaches for the Analysis</span></span>
<span id="cb6-235"><a href="#cb6-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-236"><a href="#cb6-236" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Random Forest or Gradient Boosting**: </span>
<span id="cb6-237"><a href="#cb6-237" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>the label is e.g. “heart disease mortality” or “stroke mortality” in a given county-year.</span>
<span id="cb6-238"><a href="#cb6-238" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Input features:</span>
<span id="cb6-239"><a href="#cb6-239" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>average O3, possibly max O3, or # of days &gt; 70 ppb</span>
<span id="cb6-240"><a href="#cb6-240" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>plus socioeconomic/demographic factors from the Census (like median income, age distribution, etc.).</span>
<span id="cb6-241"><a href="#cb6-241" aria-hidden="true" tabindex="-1"></a><span class="ss">    - </span>measure how well the model predicts mortality across counties and time.</span>
<span id="cb6-242"><a href="#cb6-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-243"><a href="#cb6-243" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Neural Network (Fully-Connected or simple LSTM)**: </span>
<span id="cb6-244"><a href="#cb6-244" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>If i keep the data as a time-series for each county (like 14 years from 2001–2014), we could feed those sequences into an LSTM or 1D CNN.</span>
<span id="cb6-245"><a href="#cb6-245" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>However, that might be more advanced than needed, will need to use PyTorch or TensorFlow for geospatial analysis</span>
<span id="cb6-246"><a href="#cb6-246" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>LSTM = long short-term memory</span>
<span id="cb6-247"><a href="#cb6-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-248"><a href="#cb6-248" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Geospatial Splitting or Cross‐Validation**: </span>
<span id="cb6-249"><a href="#cb6-249" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>can do a “spatial cross validation” approach. train on some subset of counties, test on other counties to see if the model generalizes to new geographic areas</span>
<span id="cb6-250"><a href="#cb6-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-251"><a href="#cb6-251" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>should be a good “AI + geospatial data” method often used in environmental modeling.</span>
<span id="cb6-252"><a href="#cb6-252" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb6-253"><a href="#cb6-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-254"><a href="#cb6-254" aria-hidden="true" tabindex="-1"></a><span class="fu"># Foundational Data Processing: A Demonstration</span></span>
<span id="cb6-255"><a href="#cb6-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-256"><a href="#cb6-256" aria-hidden="true" tabindex="-1"></a>The following sections provide a practical demonstration of the initial data exploration and preprocessing challenges encountered during this project, particularly when handling the large-scale CDC datasets. While the final, production-level data pipeline was subsequently implemented in Python for enhanced performance and integration with deep learning libraries, these original R code snippets illustrate the foundational steps required.</span>
<span id="cb6-257"><a href="#cb6-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-258"><a href="#cb6-258" aria-hidden="true" tabindex="-1"></a>They document the computational scale of the data—with files exceeding 100 million rows—and the necessity of techniques such as efficient file loading with <span class="in">`data.table`</span>, parallelized processing to manage memory constraints, and complex data merges. This initial work was crucial in justifying the high-performance hardware and software architecture ultimately chosen for the dissertation's primary analytical pipeline.</span>
<span id="cb6-259"><a href="#cb6-259" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-260"><a href="#cb6-260" aria-hidden="true" tabindex="-1"></a><span class="fu">## Load Libraries and Set Up Environment</span></span>
<span id="cb6-261"><a href="#cb6-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-264"><a href="#cb6-264" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-265"><a href="#cb6-265" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: setup-libraries</span></span>
<span id="cb6-266"><a href="#cb6-266" aria-hidden="true" tabindex="-1"></a><span class="co">#| warning: false</span></span>
<span id="cb6-267"><a href="#cb6-267" aria-hidden="true" tabindex="-1"></a><span class="co">#| message: false</span></span>
<span id="cb6-268"><a href="#cb6-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-269"><a href="#cb6-269" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb6-270"><a href="#cb6-270" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb6-271"><a href="#cb6-271" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb6-272"><a href="#cb6-272" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb6-273"><a href="#cb6-273" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(flextable)</span>
<span id="cb6-274"><a href="#cb6-274" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(skimr)</span>
<span id="cb6-275"><a href="#cb6-275" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Hmisc)</span>
<span id="cb6-276"><a href="#cb6-276" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(soiltexture)</span>
<span id="cb6-277"><a href="#cb6-277" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb6-278"><a href="#cb6-278" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(arrow)       <span class="co"># For Feather export</span></span>
<span id="cb6-279"><a href="#cb6-279" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(parallel)</span>
<span id="cb6-280"><a href="#cb6-280" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb6-281"><a href="#cb6-281" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-282"><a href="#cb6-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-283"><a href="#cb6-283" aria-hidden="true" tabindex="-1"></a>We load the parallel package for multi-core processing, arrow for Feather file writing, and data.table (via fread) to handle large CSVs efficiently.</span>
<span id="cb6-284"><a href="#cb6-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-285"><a href="#cb6-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-286"><a href="#cb6-286" aria-hidden="true" tabindex="-1"></a><span class="fu">## Importing the Data</span></span>
<span id="cb6-287"><a href="#cb6-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-288"><a href="#cb6-288" aria-hidden="true" tabindex="-1"></a>Below, we read the relevant CDC datasets. Note that some files exceed 10 GB, so fread() or chunk-based reading is used. Adjust paths as needed.</span>
<span id="cb6-289"><a href="#cb6-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-292"><a href="#cb6-292" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-293"><a href="#cb6-293" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: load-cdc-data</span></span>
<span id="cb6-294"><a href="#cb6-294" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb6-295"><a href="#cb6-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-296"><a href="#cb6-296" aria-hidden="true" tabindex="-1"></a><span class="co"># PLACES data</span></span>
<span id="cb6-297"><a href="#cb6-297" aria-hidden="true" tabindex="-1"></a>places_gis_friendly_2020 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/PLACES_Place_Data_GIS_Friendly_Format_2020_release.csv"</span>)</span>
<span id="cb6-298"><a href="#cb6-298" aria-hidden="true" tabindex="-1"></a>places_gis_ZCTA_2020     <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/PLACES_ZCTA_Data_GIS_Friendly_Format_2020_release.csv"</span>)</span>
<span id="cb6-299"><a href="#cb6-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-300"><a href="#cb6-300" aria-hidden="true" tabindex="-1"></a><span class="co"># SDOH measures for ZCTA ACS 2017-2021</span></span>
<span id="cb6-301"><a href="#cb6-301" aria-hidden="true" tabindex="-1"></a>SDOH_measures_for_zcta_acs <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/SDOH_Measures_for_ZCTA_ACS_2017-2021.csv"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb6-302"><a href="#cb6-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-303"><a href="#cb6-303" aria-hidden="true" tabindex="-1"></a><span class="co"># COVID-19 case surveillance with geography</span></span>
<span id="cb6-304"><a href="#cb6-304" aria-hidden="true" tabindex="-1"></a>covid_19_case_surveillance <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">fread</span>(<span class="st">"data/COVID-19_Case_Surveillance_Public_Use_Data_with_Geography.csv"</span>))</span>
<span id="cb6-305"><a href="#cb6-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-306"><a href="#cb6-306" aria-hidden="true" tabindex="-1"></a><span class="co"># daily PM 2.5 county level 2001-2014</span></span>
<span id="cb6-307"><a href="#cb6-307" aria-hidden="true" tabindex="-1"></a>daily_pm_2_5 <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/Daily_County-Level_PM2.5_Concentrations_2001-2014.csv"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb6-308"><a href="#cb6-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-309"><a href="#cb6-309" aria-hidden="true" tabindex="-1"></a><span class="co"># Heart disease &amp; stroke mortality</span></span>
<span id="cb6-310"><a href="#cb6-310" aria-hidden="true" tabindex="-1"></a>stroke_mortality_state_county <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/Stroke_Mortality_Data_Among_US_Adults_35_by_State_Territory_and_County_2019-2021.csv"</span>, <span class="at">header =</span> <span class="cn">TRUE</span>, <span class="at">sep =</span> <span class="st">","</span>)</span>
<span id="cb6-311"><a href="#cb6-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-312"><a href="#cb6-312" aria-hidden="true" tabindex="-1"></a>coronary_heart_disease_stroke <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"data/Rates_and_Trends_in_Coronary_Heart_Disease_and_Stroke_Mortality_Data_Among_US_Adults_35_by_County_1999-2018.csv"</span>)</span>
<span id="cb6-313"><a href="#cb6-313" aria-hidden="true" tabindex="-1"></a>heartdisease_stroke_mortality_adults <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(</span>
<span id="cb6-314"><a href="#cb6-314" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fread</span>(<span class="st">"data/Rates_and_Trends_in_Heart_Disease_and_Stroke_Mortality_Among_US_Adults_35_by_County_Age_Group_Race_Ethnicity_and_Sex_2000-2019.csv"</span>)</span>
<span id="cb6-315"><a href="#cb6-315" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-316"><a href="#cb6-316" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-317"><a href="#cb6-317" aria-hidden="true" tabindex="-1"></a><span class="co"># Ozone data can be huge, so we use fread</span></span>
<span id="cb6-318"><a href="#cb6-318" aria-hidden="true" tabindex="-1"></a>daily_census_tract_ozone_2001_2005 <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(</span>
<span id="cb6-319"><a href="#cb6-319" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fread</span>(<span class="st">"data/Daily_Census_Tract-Level_Ozone_Concentrations_2001-2005.csv"</span>)</span>
<span id="cb6-320"><a href="#cb6-320" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-321"><a href="#cb6-321" aria-hidden="true" tabindex="-1"></a>daily_census_tract_ozone_2006_2010 <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(</span>
<span id="cb6-322"><a href="#cb6-322" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fread</span>(<span class="st">"data/Daily_Census_Tract-Level_Ozone_Concentrations_2006-2010.csv"</span>)</span>
<span id="cb6-323"><a href="#cb6-323" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-324"><a href="#cb6-324" aria-hidden="true" tabindex="-1"></a>daily_census_tract_ozone_2011_2014 <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(</span>
<span id="cb6-325"><a href="#cb6-325" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fread</span>(<span class="st">"data/Daily_Census_Tract-Level_Ozone_Concentrations_2011-2014.csv"</span>)</span>
<span id="cb6-326"><a href="#cb6-326" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-327"><a href="#cb6-327" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-328"><a href="#cb6-328" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-329"><a href="#cb6-329" aria-hidden="true" tabindex="-1"></a> Note that eval is set to false, these are not files or code lines that someone may want to accidentally start</span>
<span id="cb6-330"><a href="#cb6-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-331"><a href="#cb6-331" aria-hidden="true" tabindex="-1"></a><span class="fu">## Summaries with Multi-Threading</span></span>
<span id="cb6-332"><a href="#cb6-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-333"><a href="#cb6-333" aria-hidden="true" tabindex="-1"></a>Next, we define helper functions to summarize each column, then use parLapply to parallelize. We demonstrate it first on the heart disease &amp; stroke dataset, then on one portion of the ozone dataset.</span>
<span id="cb6-334"><a href="#cb6-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-337"><a href="#cb6-337" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-338"><a href="#cb6-338" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: parallel-summaries</span></span>
<span id="cb6-339"><a href="#cb6-339" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb6-340"><a href="#cb6-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-341"><a href="#cb6-341" aria-hidden="true" tabindex="-1"></a><span class="co"># Define summarization for typical numeric/factor columns</span></span>
<span id="cb6-342"><a href="#cb6-342" aria-hidden="true" tabindex="-1"></a>summarize_column <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">threshold =</span> <span class="dv">20</span>) {</span>
<span id="cb6-343"><a href="#cb6-343" aria-hidden="true" tabindex="-1"></a>  unique_vals <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">unique</span>(x))</span>
<span id="cb6-344"><a href="#cb6-344" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.numeric</span>(x) <span class="sc">&amp;&amp;</span> <span class="fu">length</span>(unique_vals) <span class="sc">&gt;</span> threshold) {</span>
<span id="cb6-345"><a href="#cb6-345" aria-hidden="true" tabindex="-1"></a>    summ <span class="ot">&lt;-</span> <span class="fu">summary</span>(x)</span>
<span id="cb6-346"><a href="#cb6-346" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">paste</span>(<span class="st">"Continuous variable summary:"</span>,</span>
<span id="cb6-347"><a href="#cb6-347" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"Min:"</span>, summ[<span class="st">"Min."</span>],</span>
<span id="cb6-348"><a href="#cb6-348" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"1st Qu.:"</span>, summ[<span class="st">"1st Qu."</span>],</span>
<span id="cb6-349"><a href="#cb6-349" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"Median:"</span>, summ[<span class="st">"Median"</span>],</span>
<span id="cb6-350"><a href="#cb6-350" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"Mean:"</span>, <span class="fu">round</span>(<span class="fu">as.numeric</span>(summ[<span class="st">"Mean"</span>]), <span class="dv">2</span>),</span>
<span id="cb6-351"><a href="#cb6-351" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"3rd Qu.:"</span>, summ[<span class="st">"3rd Qu."</span>],</span>
<span id="cb6-352"><a href="#cb6-352" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"Max:"</span>, summ[<span class="st">"Max."</span>]))</span>
<span id="cb6-353"><a href="#cb6-353" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb6-354"><a href="#cb6-354" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">paste</span>(unique_vals, <span class="at">collapse =</span> <span class="st">", "</span>))</span>
<span id="cb6-355"><a href="#cb6-355" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-356"><a href="#cb6-356" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-357"><a href="#cb6-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-358"><a href="#cb6-358" aria-hidden="true" tabindex="-1"></a><span class="co"># For ozone data (which can have many numeric columns)</span></span>
<span id="cb6-359"><a href="#cb6-359" aria-hidden="true" tabindex="-1"></a>summarize_column_ozone <span class="ot">&lt;-</span> <span class="cf">function</span>(x, <span class="at">threshold =</span> <span class="dv">20</span>, <span class="at">sample_size =</span> <span class="dv">20</span>) {</span>
<span id="cb6-360"><a href="#cb6-360" aria-hidden="true" tabindex="-1"></a>  unique_vals <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">unique</span>(x))</span>
<span id="cb6-361"><a href="#cb6-361" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">is.numeric</span>(x) <span class="sc">&amp;&amp;</span> <span class="fu">length</span>(unique_vals) <span class="sc">&gt;</span> threshold) {</span>
<span id="cb6-362"><a href="#cb6-362" aria-hidden="true" tabindex="-1"></a>    summ <span class="ot">&lt;-</span> <span class="fu">summary</span>(x)</span>
<span id="cb6-363"><a href="#cb6-363" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">paste</span>(<span class="st">"Continuous variable summary:"</span>,</span>
<span id="cb6-364"><a href="#cb6-364" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"Min:"</span>, summ[<span class="st">"Min."</span>],</span>
<span id="cb6-365"><a href="#cb6-365" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"1st Qu.:"</span>, summ[<span class="st">"1st Qu."</span>],</span>
<span id="cb6-366"><a href="#cb6-366" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"Median:"</span>, summ[<span class="st">"Median"</span>],</span>
<span id="cb6-367"><a href="#cb6-367" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"Mean:"</span>, <span class="fu">round</span>(<span class="fu">as.numeric</span>(summ[<span class="st">"Mean"</span>]), <span class="dv">2</span>),</span>
<span id="cb6-368"><a href="#cb6-368" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"3rd Qu.:"</span>, summ[<span class="st">"3rd Qu."</span>],</span>
<span id="cb6-369"><a href="#cb6-369" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"Max:"</span>, summ[<span class="st">"Max."</span>]))</span>
<span id="cb6-370"><a href="#cb6-370" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span>(<span class="fu">length</span>(unique_vals) <span class="sc">&gt;</span> sample_size) {</span>
<span id="cb6-371"><a href="#cb6-371" aria-hidden="true" tabindex="-1"></a>    sampled_vals <span class="ot">&lt;-</span> <span class="fu">sample</span>(unique_vals, sample_size)</span>
<span id="cb6-372"><a href="#cb6-372" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">paste</span>(sampled_vals, <span class="at">collapse =</span> <span class="st">", "</span>))</span>
<span id="cb6-373"><a href="#cb6-373" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb6-374"><a href="#cb6-374" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="fu">paste</span>(unique_vals, <span class="at">collapse =</span> <span class="st">", "</span>))</span>
<span id="cb6-375"><a href="#cb6-375" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb6-376"><a href="#cb6-376" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-377"><a href="#cb6-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-378"><a href="#cb6-378" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a cluster</span></span>
<span id="cb6-379"><a href="#cb6-379" aria-hidden="true" tabindex="-1"></a>n_cores <span class="ot">&lt;-</span> <span class="fu">detectCores</span>() <span class="sc">-</span> <span class="dv">2</span></span>
<span id="cb6-380"><a href="#cb6-380" aria-hidden="true" tabindex="-1"></a>cl <span class="ot">&lt;-</span> <span class="fu">makeCluster</span>(n_cores)</span>
<span id="cb6-381"><a href="#cb6-381" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-382"><a href="#cb6-382" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize columns of heart disease/stroke data</span></span>
<span id="cb6-383"><a href="#cb6-383" aria-hidden="true" tabindex="-1"></a><span class="fu">clusterExport</span>(cl, <span class="at">varlist =</span> <span class="fu">c</span>(<span class="st">"summarize_column"</span>), <span class="at">envir =</span> <span class="fu">environment</span>())</span>
<span id="cb6-384"><a href="#cb6-384" aria-hidden="true" tabindex="-1"></a>result_list_hd <span class="ot">&lt;-</span> <span class="fu">parLapply</span>(cl, heartdisease_stroke_mortality_adults, summarize_column)</span>
<span id="cb6-385"><a href="#cb6-385" aria-hidden="true" tabindex="-1"></a>result_hd      <span class="ot">&lt;-</span> <span class="fu">unlist</span>(result_list_hd)</span>
<span id="cb6-386"><a href="#cb6-386" aria-hidden="true" tabindex="-1"></a>result_df_hd   <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Column =</span> <span class="fu">names</span>(result_hd),</span>
<span id="cb6-387"><a href="#cb6-387" aria-hidden="true" tabindex="-1"></a>                             <span class="at">Summary =</span> <span class="fu">as.character</span>(result_hd),</span>
<span id="cb6-388"><a href="#cb6-388" aria-hidden="true" tabindex="-1"></a>                             <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-389"><a href="#cb6-389" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">head</span>(result_df_hd, <span class="dv">10</span>))  <span class="co"># just preview</span></span>
<span id="cb6-390"><a href="#cb6-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-391"><a href="#cb6-391" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarize columns for 2001-2005 ozone data</span></span>
<span id="cb6-392"><a href="#cb6-392" aria-hidden="true" tabindex="-1"></a><span class="fu">clusterExport</span>(cl, <span class="at">varlist =</span> <span class="fu">c</span>(<span class="st">"summarize_column_ozone"</span>), <span class="at">envir =</span> <span class="fu">environment</span>())</span>
<span id="cb6-393"><a href="#cb6-393" aria-hidden="true" tabindex="-1"></a>result_list_o <span class="ot">&lt;-</span> <span class="fu">parLapply</span>(cl, daily_census_tract_ozone_2001_2005, summarize_column_ozone)</span>
<span id="cb6-394"><a href="#cb6-394" aria-hidden="true" tabindex="-1"></a>result_o      <span class="ot">&lt;-</span> <span class="fu">unlist</span>(result_list_o)</span>
<span id="cb6-395"><a href="#cb6-395" aria-hidden="true" tabindex="-1"></a>result_df_o   <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">Column =</span> <span class="fu">names</span>(result_o),</span>
<span id="cb6-396"><a href="#cb6-396" aria-hidden="true" tabindex="-1"></a>                            <span class="at">Summary =</span> <span class="fu">as.character</span>(result_o),</span>
<span id="cb6-397"><a href="#cb6-397" aria-hidden="true" tabindex="-1"></a>                            <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-398"><a href="#cb6-398" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">head</span>(result_df_o, <span class="dv">10</span>))</span>
<span id="cb6-399"><a href="#cb6-399" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-400"><a href="#cb6-400" aria-hidden="true" tabindex="-1"></a><span class="fu">stopCluster</span>(cl)</span>
<span id="cb6-401"><a href="#cb6-401" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-402"><a href="#cb6-402" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-403"><a href="#cb6-403" aria-hidden="true" tabindex="-1"></a>Above, you can see how we parallelize the summary using parLapply.</span>
<span id="cb6-404"><a href="#cb6-404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-405"><a href="#cb6-405" aria-hidden="true" tabindex="-1"></a><span class="fu">## Merge &amp; Standardize Ozone Data</span></span>
<span id="cb6-406"><a href="#cb6-406" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-407"><a href="#cb6-407" aria-hidden="true" tabindex="-1"></a>The next step is standardizing column names, converting date strings with lubridate, and merging all three ozone subsets into a single data.table. Then we write the final table to a Feather file.</span>
<span id="cb6-408"><a href="#cb6-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-411"><a href="#cb6-411" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-412"><a href="#cb6-412" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: merge-ozone-data</span></span>
<span id="cb6-413"><a href="#cb6-413" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb6-414"><a href="#cb6-414" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-415"><a href="#cb6-415" aria-hidden="true" tabindex="-1"></a><span class="co"># Example: unify column names for the 2011-2014 dataset</span></span>
<span id="cb6-416"><a href="#cb6-416" aria-hidden="true" tabindex="-1"></a><span class="fu">setnames</span>(daily_census_tract_ozone_2011_2014,</span>
<span id="cb6-417"><a href="#cb6-417" aria-hidden="true" tabindex="-1"></a>         <span class="at">old =</span> <span class="fu">c</span>(<span class="st">"ds_o3_pred"</span>, <span class="st">"ds_o3_stdd"</span>),</span>
<span id="cb6-418"><a href="#cb6-418" aria-hidden="true" tabindex="-1"></a>         <span class="at">new =</span> <span class="fu">c</span>(<span class="st">"DS_O3_pred"</span>, <span class="st">"DS_O3_stdd"</span>))</span>
<span id="cb6-419"><a href="#cb6-419" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-420"><a href="#cb6-420" aria-hidden="true" tabindex="-1"></a><span class="co"># Put the three ozone data frames in a list</span></span>
<span id="cb6-421"><a href="#cb6-421" aria-hidden="true" tabindex="-1"></a>ozone_list <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb6-422"><a href="#cb6-422" aria-hidden="true" tabindex="-1"></a>  daily_census_tract_ozone_2001_2005,</span>
<span id="cb6-423"><a href="#cb6-423" aria-hidden="true" tabindex="-1"></a>  daily_census_tract_ozone_2006_2010,</span>
<span id="cb6-424"><a href="#cb6-424" aria-hidden="true" tabindex="-1"></a>  daily_census_tract_ozone_2011_2014</span>
<span id="cb6-425"><a href="#cb6-425" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-426"><a href="#cb6-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-427"><a href="#cb6-427" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert date using parallel again</span></span>
<span id="cb6-428"><a href="#cb6-428" aria-hidden="true" tabindex="-1"></a>convert_date <span class="ot">&lt;-</span> <span class="cf">function</span>(df) {</span>
<span id="cb6-429"><a href="#cb6-429" aria-hidden="true" tabindex="-1"></a>  df<span class="sc">$</span>date <span class="ot">&lt;-</span> lubridate<span class="sc">::</span><span class="fu">dmy</span>(df<span class="sc">$</span>date)</span>
<span id="cb6-430"><a href="#cb6-430" aria-hidden="true" tabindex="-1"></a>  df</span>
<span id="cb6-431"><a href="#cb6-431" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb6-432"><a href="#cb6-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-433"><a href="#cb6-433" aria-hidden="true" tabindex="-1"></a>cl2 <span class="ot">&lt;-</span> <span class="fu">makeCluster</span>(<span class="fu">detectCores</span>() <span class="sc">-</span> <span class="dv">2</span>)</span>
<span id="cb6-434"><a href="#cb6-434" aria-hidden="true" tabindex="-1"></a><span class="fu">clusterEvalQ</span>(cl2, <span class="fu">library</span>(lubridate))</span>
<span id="cb6-435"><a href="#cb6-435" aria-hidden="true" tabindex="-1"></a><span class="fu">clusterExport</span>(cl2, <span class="at">varlist =</span> <span class="fu">c</span>(<span class="st">"convert_date"</span>), <span class="at">envir =</span> <span class="fu">environment</span>())</span>
<span id="cb6-436"><a href="#cb6-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-437"><a href="#cb6-437" aria-hidden="true" tabindex="-1"></a>ozone_list_converted <span class="ot">&lt;-</span> <span class="fu">parLapply</span>(cl2, ozone_list, convert_date)</span>
<span id="cb6-438"><a href="#cb6-438" aria-hidden="true" tabindex="-1"></a><span class="fu">stopCluster</span>(cl2)</span>
<span id="cb6-439"><a href="#cb6-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-440"><a href="#cb6-440" aria-hidden="true" tabindex="-1"></a><span class="co"># Merge with rbindlist</span></span>
<span id="cb6-441"><a href="#cb6-441" aria-hidden="true" tabindex="-1"></a>daily_ozone_all <span class="ot">&lt;-</span> data.table<span class="sc">::</span><span class="fu">rbindlist</span>(ozone_list_converted, <span class="at">use.names =</span> <span class="cn">TRUE</span>, <span class="at">fill =</span> <span class="cn">TRUE</span>)</span>
<span id="cb6-442"><a href="#cb6-442" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-443"><a href="#cb6-443" aria-hidden="true" tabindex="-1"></a><span class="co"># Quick check</span></span>
<span id="cb6-444"><a href="#cb6-444" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(daily_ozone_all<span class="sc">$</span>date)</span>
<span id="cb6-445"><a href="#cb6-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-446"><a href="#cb6-446" aria-hidden="true" tabindex="-1"></a><span class="co"># Save as feather (reduces from ~27 GB to ~13 GB)</span></span>
<span id="cb6-447"><a href="#cb6-447" aria-hidden="true" tabindex="-1"></a>arrow<span class="sc">::</span><span class="fu">write_feather</span>(daily_ozone_all, </span>
<span id="cb6-448"><a href="#cb6-448" aria-hidden="true" tabindex="-1"></a>  <span class="st">"data/daily_census_tract_ozone_2001_2014.feather"</span></span>
<span id="cb6-449"><a href="#cb6-449" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-450"><a href="#cb6-450" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-451"><a href="#cb6-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-452"><a href="#cb6-452" aria-hidden="true" tabindex="-1"></a><span class="fu">## Export Other Datasets as Feather</span></span>
<span id="cb6-453"><a href="#cb6-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-454"><a href="#cb6-454" aria-hidden="true" tabindex="-1"></a>Finally, any large data frames (such as heart disease/stroke mortality) can also be exported:</span>
<span id="cb6-455"><a href="#cb6-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-458"><a href="#cb6-458" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb6-459"><a href="#cb6-459" aria-hidden="true" tabindex="-1"></a><span class="co">#| label: export-feather</span></span>
<span id="cb6-460"><a href="#cb6-460" aria-hidden="true" tabindex="-1"></a><span class="co">#| eval: false</span></span>
<span id="cb6-461"><a href="#cb6-461" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-462"><a href="#cb6-462" aria-hidden="true" tabindex="-1"></a>arrow<span class="sc">::</span><span class="fu">write_feather</span>(</span>
<span id="cb6-463"><a href="#cb6-463" aria-hidden="true" tabindex="-1"></a>  heartdisease_stroke_mortality_adults, </span>
<span id="cb6-464"><a href="#cb6-464" aria-hidden="true" tabindex="-1"></a>  <span class="st">"data/HeartDisease_StrokeMortality.feather"</span></span>
<span id="cb6-465"><a href="#cb6-465" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-466"><a href="#cb6-466" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb6-467"><a href="#cb6-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-468"><a href="#cb6-468" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-469"><a href="#cb6-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-470"><a href="#cb6-470" aria-hidden="true" tabindex="-1"></a>___</span>
<span id="cb6-471"><a href="#cb6-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-472"><a href="#cb6-472" aria-hidden="true" tabindex="-1"></a>*That’s it for now* in terms of describing the possible data collection approach. </span>
<span id="cb6-473"><a href="#cb6-473" aria-hidden="true" tabindex="-1"></a>As the project evolves, I might refine exactly how these datasets are integrated </span>
<span id="cb6-474"><a href="#cb6-474" aria-hidden="true" tabindex="-1"></a>and whether I keep them in a separate Big Data environment or incorporate them </span>
<span id="cb6-475"><a href="#cb6-475" aria-hidden="true" tabindex="-1"></a>directly into the pipeline.</span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Written by Alex Godinez | <a href="https://github.com/agodinezmm2007">GitHub</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>Built with <a href="https://quarto.org/">Quarto</a></p>
</div>
  </div>
</footer>




<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>